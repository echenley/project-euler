# The prime factors of 13195
# are 5, 7, 13 and 29.

# What is the largest prime factor
# of the number 600851475143 ?

primes = [2,3]
factors = []
num = 1001
dynum = num
n = 0

def next_prime(pos_prime,dynum)
    while pos_prime <= Math.sqrt(dynum).floor 
        limit = Math.sqrt(pos_prime).floor
        divisor = 3
        return pos_prime if divisor > limit
        while divisor <= limit
            if pos_prime % divisor == 0
                break
            elsif (divisor + 2) > limit
                return pos_prime
            end
            divisor += 2
        end
        pos_prime += 2
    end
    return dynum
end

while primes[n] <= dynum
    if primes[n] == dynum
        factors.push(primes[n])
        break
    elsif dynum % primes[n] == 0
        factors.push(primes[n])
        dynum /= primes[n]
        redo
    elsif n == primes.length - 1
        primes.push(next_prime(primes[n]+2,dynum))
    end
    n += 1
end

puts "This is your prime set: #{primes.inspect}"
puts "The prime factors of #{num} are #{factors.inspect}"
